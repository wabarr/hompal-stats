The gold standard for reproducible research is to write your papers as R markdown documents, with embedded R code. All your figures, tables (with captions for both) are recreated everytime you knit the document, and reference lists are built automatically. 

## This gold standard is achievable using Rstudio

Even if you never write a paper directly in R markdown, there are a few tools that will make your use of Rmarkdown more productive

*   using appropriate section headings
*   using figure captions
*  `pander` for data frames, and for tabularizing model output (also table captions)
*  including citations in R markdown


## Section headings

Pay careful attention to the way you use headings in Rmarkdown.  

*  `#` is the first level heading - this is usually the document title
*  `##` is the second level heading - this might be the main sections of a paper: Introduction, Methods, Conclusion, etc.
*  `###` is the third level heading - for sub-sections within main parts of the document

### The key point is, think about the structure of the document, and use the headings consistently.  This makes is easier to change document formats (e.g. to PDF or to MS Word) and have the results make sense.

## Figure captions

When you create figures in RMarkdown, you can give them captions.  This is good practice:

\`\`\`{r, fig.cap="Histogram of normal distribution, n=1000"}<br>
library(ggplot2)</br>
qplot(rnorm(1000))</br>
\`\`\`

```{r, fig.cap="Histogram of normal distribution, n=1000", echo=FALSE}
library(ggplot2)
qplot(rnorm(1000))
```

These captions aren't visible in the HTML output, but they are in there, and will be included when you covert the document to other formats

## pander - a useful tool for formatting tabular data in R Markdown

By default when you print a dataframe to a markdown documen, it doesn't look that great. 

```{r}
head(mtcars)
```


Pander turns the dataframe into something much nicer!

```{r}
library(pander)
pander(mtcars, split.tables = 200)
```

### It is smart enought to deal with many common output types

#### lm
```{r}
pander(lm(mpg~wt, data=mtcars))
```


### chisq.test
```{r}
pander(chisq.test(mtcars$cyl))
```

### anova
```{r}
pander(anova(lm(mpg~cyl, data=mtcars)))
```

### prcomp

```{r}
pander(summary(prcomp(mtcars)))
```



## Including references in markdown documents

In the front-matter of the R markdown document (where you put your name and the date, etc), you can optionally include a bibliography file (containing a list of reference) and a csl document (a document specifying the style of references desired).  This is what the front-matter of the R markdown document used to create this document looks like: 

```{}
---
title: "publishing papers with R"
output: html_document
bibliography: bib.bib
csl: elsevier-harvard.csl
---
```

### bibliography file

R markdown can read many common reference formats (easily exported from Papers, Zotero, or Endnote), these include:

*  .bib (BibTeX)
*  .RIS (RIS)
*  .enl (Endnote)

A full list and more details [can be found here](http://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html). The file should live in the same directory as the Rmarkdown document

### csl file

This file indicates how the inline citations and the bibliography should be formatted.  You can browse many csl styles for specific journals [here](http://zotero.org/styles).  When you download the csl file, you should put it in the same directory as the RMarkdown file. 

### an example

You can see what my .bib file looks like [here](bib.bib).  Note that each reference is given a unique key in the format `lastName_firstWordOfTitle_Year`.  These keys are used to insert inline citations. Every reference cited will automagically be added to the bibliography, which will be placed at the end of the file. 

#### Here is an example of the raw text before processing:

```{}
Here is a nice paper about savannas [@skarpe_dynamics_1992].  There are a couple more articles also [@foley_integrated_1996; @eltahir_role_2004]. Finally, Belsky [-@belsky_tree/grass_1990] published an article about savannas, as well. 

## References
```
#### This is what the output looks like.

Here is a nice paper about savannas [@skarpe_dynamics_1992].  There are a couple more articles also [@foley_integrated_1996; @eltahir_role_2004]. Finally, Belsky [-@belsky_tree/grass_1990] published an article about savannas, as well. 

## References

 
